!function(){"use strict";var e=(e,t)=>{const n=document.createElement("div");n.className="coaches";const a=document.createElement("h2");a.innerHTML="Coaches",n.appendChild(a);const c=t.map(t=>((e,t)=>{if(t.views&&t.views.thumb)return t.views.thumb;const n=document.createElement("img");n.alt=t.name+" - "+t.userName,n.className="student-thumb-img",fetch("https://api.github.com/users/"+t.userName).then(e=>e.json()).then(e=>n.src=e.avatar_url).catch(e=>console.log(e));const a=document.createElement("h2");a.innerHTML=t.name,a.className="coach-thumb-name";const c=document.createElement("button");c.innerHTML="github.com/"+t.userName;const d=document.createElement("a");d.href="https://github.com/"+t.userName,d.target="_blank",d.appendChild(c);const o=document.createElement("button");o.innerHTML="coach bio";const r=document.createElement("a");r.href="https://github.com/"+e.userName+"/"+e.repoName+`/tree/master/coach-bios/${t.userName}.md`,r.target="_blank",r.appendChild(o);const s=(()=>{if("number"==typeof t.class){const e=document.createElement("text");return e.innerHTML="Class "+t.class,e}return null})(),l=(()=>{if("string"==typeof t.role){const e=document.createElement("text");return e.innerHTML=t.role,e}return null})();console.log(l,t.role);const m=[a,l,s,d,r].filter(e=>e instanceof Element).map(e=>{const t=document.createElement("li");return t.appendChild(e),t}).reduce((e,t)=>(e.appendChild(t),e),document.createElement("ul"));m.style="text-align: left",t.modules.forEach(t=>{const n=document.createElement("li"),a=document.createElement("button");a.innerHTML="- "+t;const c=document.createElement("a");c.href="https://"+e.userName+".github.io/"+e.repoName+"?module="+t,c.target="_blank",c.appendChild(a),n.appendChild(c),m.appendChild(n)});const i=document.createElement("div");return i.id=t.name,i.className="student-thumb",i.appendChild(n),i.appendChild(m),t.views?t.views.thumb=i:t.views={thumb:i},i})(e,t)).reduce((e,t)=>(e.appendChild(t),e),document.createElement("div"));return c.className="coach-thumbs",n.appendChild(c),n},t=(e,t,n)=>{const a=document.createElement("li");a.className="assignment",a.id=t.name;const c=document.createElement("h3");c.className="assignment-title";const d=document.createTextNode(t.name+": ");c.appendChild(d),a.appendChild(c);const o=(t.source?t.source:"https://github.com/"+n.userName+"/"+(t.repo||t.name)).replace("<user-name>",n.userName).replace("<class-name>",e.repoName);if(!1!==t.source){const e=document.createElement("button");e.innerHTML="review source";const t=document.createElement("a");t.target="_blank",t.href=o,t.appendChild(e),a.appendChild(t)}const r=("string"==typeof t.live?t.live:"https://"+n.userName+".github.io/"+(t.repo||t.name)).replace("<user-name>",n.userName).replace("<class-name>",e.repoName);if("string"==typeof t.live){const e=document.createElement("button");e.innerHTML="live assignment";const t=document.createElement("a");t.target="_blank",t.href=r,t.appendChild(e),a.appendChild(t)}else if(!0===t.live){const e=document.createElement("button");e.innerHTML="live project";const t=document.createElement("a");t.target="_blank",t.href=r,t.appendChild(e),a.appendChild(t)}if(Array.isArray(t.endpoints)&&t.endpoints.length>0){const e=t.endpoints.map(e=>{const n=document.createElement("button");n.innerHTML="source";const a=document.createElement("li");if(a.appendChild(document.createTextNode(e)),!1!==t.source){const t=document.createElement("a");t.target="_blank",t.href=o+"/tree/master/"+e,t.appendChild(n),a.appendChild(t)}if(t.live){const t=document.createElement("button");t.innerHTML="live";const n=document.createElement("a");n.target="_blank",n.href=r+"/"+e,n.appendChild(t),a.appendChild(n)}return a}).reduce((e,t)=>(e.appendChild(t),e),document.createElement("ul"));e.id="endpoints-"+t.name,a.appendChild(e)}if(t.reports&&t.reports.length>0){const e=document.createElement("ul");for(const a of t.reports){const c=document.createElement("li"),d=document.createElement("text");d.innerHTML=a+": ",c.appendChild(d);const o=document.createElement("button");o.innerHTML="log report",o.onclick=async()=>{console.group(n.name+": "+t.name+" -> "+a),console.log(await(async()=>{const e=await fetch(r+"/"+a);try{return await e.clone().json()}catch(t){return await e.text()}})()),console.groupEnd()},c.appendChild(o),e.appendChild(c)}e.id="reports-"+t.name,a.appendChild(e)}if(Array.isArray(t.branches)){const e=e=>{const t=o+"/tree/"+e,n=document.createElement("button");return n.innerHTML=e,n.onclick=()=>window.open(t,"_blank"),n},n=t.branches.map(t=>e(t)).reduce((e,t)=>{const n=document.createElement("li");return n.appendChild(t),e.appendChild(n),e},document.createElement("ul")),c=document.createElement("li");c.appendChild(document.createTextNode("required branches: ")),c.appendChild(e("master")),c.appendChild(n);const d=document.createElement("ul");d.appendChild(c),d.id="branches-"+t.name,a.appendChild(d)}return a},n=async(e,n)=>{if(n.views[e.name])return n.views[e.name];const a=document.createElement("details");a.className="assignments";const c=document.createElement("summary");c.innerHTML="Click to expand "+n.name+"'s assignments",a.appendChild(c);let d=!1;return a.onclick=async()=>{d||(a.appendChild(await(async(e,n)=>{if("to do"===e.status){const e=document.createElement("p");return e.innerHTML="This module has not started yet",e}if(!e.populated){e.populated=!0;const t="https://hackyourfuture.be/"+e.name+"/module-data/assignments.json";try{const n=await fetch(t),a=await n.json();Object.assign(e,a)}catch(t){console.log(t);const a=document.createElement("p");return a.innerHTML=t+": "+t.message,a.className="assignments-load-error",n.views[e.name]=a,e.views.thumb.appendChild(a.cloneNode()),a}}const a=document.createElement("ul");if(e.projects&&e.projects.length>0){const c=document.createElement("li"),d=document.createElement("h3");d.innerHTML="Projects",c.appendChild(d);const o=document.createElement("ul");for(const a of e.projects)o.appendChild(t(state,a,n));c.appendChild(o),c.id="Projects-"+e.name,a.appendChild(c)}if(e.exercises&&e.exercises.length>0){const c=document.createElement("li"),d=document.createElement("h3");d.innerHTML="Exercises",c.appendChild(d);const o=document.createElement("ul");for(const a of e.exercises)o.appendChild(t(state,a,n));c.appendChild(o),c.id="Exercises-"+e.name,a.appendChild(c)}if(e.assessments&&e.assessments.length>0){const c=document.createElement("li"),d=document.createElement("h3");d.innerHTML="Assessments",c.appendChild(d);const o=document.createElement("ul");for(const a of e.assessments)o.appendChild(t(state,a,n));c.appendChild(o),c.id="Assessments-"+e.name,a.appendChild(c)}const c=document.createElement("div");return c.className="assignments-lazy",a.id="assignments-"+e.name,c.appendChild(a),c})(e,n)),d=!0)},n.views[e.name]=a,a},a=async(t,a)=>{try{history.pushState({},null,window.location.pathname+"?module="+a.name)}catch(e){}const d=document.createElement("div");d.className="module",d.id=a.name;const r=c(t,a);d.appendChild(r),a.coaches&&a.coaches.length>0&&d.appendChild(e(t,a.coaches)),d.appendChild(document.createElement("hr"));for(const e of t.students){d.appendChild(document.createElement("hr"));const c=await o(t,e),s=await n(a,e),l=document.createElement("button");l.innerHTML=`review only ${e.userName}'s ${a.name} assignments`,l.onclick=()=>{try{history.pushState({},null,`${window.location.pathname}?student=${e.userName}&module=${a.name}`)}catch(e){}d.innerHTML="",d.appendChild(c),d.appendChild(document.createElement("hr")),d.appendChild(r),d.appendChild(s)},d.appendChild(l),d.appendChild(document.createElement("br")),d.appendChild(document.createElement("br")),d.appendChild(c),d.appendChild(s),d.appendChild(document.createElement("br")),d.appendChild(document.createElement("hr"))}return d},c=(e,t)=>{if(t.views&&t.views.thumb)return t.views.thumb;const n=document.createElement("h1");n.innerHTML=t.name||t.repo;const c=document.createElement("text");c.className="module-thumb-status",c.innerHTML=t.status;const d=document.createElement("button");d.innerHTML="Homework Board";const o=document.createElement("a");o.target="_blank",o.href="https://github.com/"+e.userName+"/"+e.repoName+"/projects/"+t.board,o.appendChild(d);const r=document.createElement("button");r.innerHTML="Module Repo";const s=document.createElement("a");s.target="_blank";const l=t.repo||t.name;s.href="https://github.com/"+(t.userName||e.userName)+"/"+l,s.appendChild(r);const m=document.createElement("button");m.innerHTML="Shared notes";const i=document.createElement("a");i.target="_blank",i.href=`https://github.com/${e.userName}/${e.repoName}/tree/master/shared-notes/${t.number}-${t.name}.md`,i.appendChild(m);const u=document.createElement("button");u.innerHTML="All student assignments",u.onclick=async()=>{const n=await a(e,t);e.body.innerHTML="",e.body.appendChild(n)};const p=[c,u,o,s,i].map(e=>{const t=document.createElement("li");return t.appendChild(e),t}).reduce((e,t)=>(e.appendChild(t),e),document.createElement("ul")),h=document.createElement("div");return h.id=t.name,h.className="module-thumb",h.appendChild(n),h.appendChild(p),t.views||(t.views={}),t.views.thumb=h,h},d=async(e,t)=>{history.pushState({},null,window.location.pathname+"?student="+t.userName);const a=document.createElement("div");a.className="students";const d=await o(e,t);a.appendChild(d),a.appendChild(document.createElement("hr"));for(const o of e.modules){const r=c(e,o),s=await n(o,t);a.appendChild(document.createElement("hr"));const l=document.createElement("button");l.innerHTML=`review only ${t.userName}'s ${o.name} assignments`,l.onclick=()=>{try{history.pushState({},null,`${window.location.pathname}?student=${t.userName}&module=${o.name}`)}catch(e){}a.innerHTML="",a.appendChild(d),a.appendChild(document.createElement("hr")),a.appendChild(document.createElement("hr")),a.appendChild(r),a.appendChild(s)},a.appendChild(l),a.appendChild(r),a.appendChild(s),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("hr"))}return a},o=async(e,t)=>{if(t.views&&t.views.thumb)return t.views.thumb;const n=document.createElement("img");n.alt=t.name+" - "+t.userName,n.className="student-thumb-img",fetch("https://api.github.com/users/"+t.userName).then(e=>e.json()).then(e=>n.src=e.avatar_url).catch(e=>console.log(e));const a=document.createElement("h2");a.innerHTML=t.name,a.className="student-thumb-name";const c=document.createElement("button");c.innerHTML="github.com/"+t.userName;const o=document.createElement("a");o.href="https://github.com/"+t.userName,o.target="_blank",o.appendChild(c);const r=document.createElement("button");r.innerHTML=t.userName+".github.io";const s=document.createElement("a");s.href="https://"+t.userName+".github.io",s.target="_blank",s.appendChild(r);const l=document.createElement("button");l.innerHTML="Student bio";const m=document.createElement("a");m.href=`https://github.com/${e.userName}/${e.repoName}/tree/master/student-bios/${t.userName}.md`,m.target="_blank",m.appendChild(l);const i=document.createElement("button");i.innerHTML="Review all assignments",i.onclick=async()=>{const n=await d(e,t);e.body.innerHTML="",e.body.appendChild(n)};const u=[a,(()=>{if("number"==typeof t.class){const e=document.createElement("text");return e.innerHTML="Class "+t.class,e}return null})(),i,o,s,m].filter(e=>e instanceof Element).map(e=>{const t=document.createElement("li");return t.appendChild(e),t}).reduce((e,t)=>(e.appendChild(t),e),document.createElement("ul")),p=document.createElement("div");return p.id=t.name,p.className="student-thumb",p.appendChild(n),p.appendChild(u),t.views||(t.views={}),t.views.thumb=p,p},r=e=>{history.pushState({},null,window.location.pathname+"?randomizer=true");const t=document.createElement("div"),n=document.createElement("div"),a=document.createTextNode("group size: ");n.appendChild(a);const c=document.createElement("input");c.value="2",c.type="number",n.appendChild(c);const d=document.createElement("button");d.innerHTML="create groups",d.onclick=async function(){r.innerHTML="";const t=Math.random();if(t<1/3){const e=document.createElement("h1");e.innerHTML="Coaches' Choice",r.appendChild(e)}else if(t<2/3){const e=document.createElement("h1");e.innerHTML="Students' Choice",r.appendChild(e)}else{const t=function(e,t){var n,a,c=(e=e.map(e=>e)).length;for(;0!==c;)a=Math.floor(Math.random()*c),n=e[c-=1],e[c]=e[a],e[a]=n;const d=[];for(;e.length>=t;)d.push(e.splice(0,t));e.length<t/2+1?d[d.length-1].push(...e):d.push(e);return d}([...e.students],c.value);console.log(t);for(let n of t){const t=document.createElement("div");t.style="display: flex; flex-direction: row; flex-wrap: wrap;";for(let a of n){const n=await o(e,a);t.appendChild(n)}r.appendChild(t),r.appendChild(document.createElement("hr"))}}},n.appendChild(d),t.appendChild(n);const r=document.createElement("div");return t.appendChild(r),t};var s=async(e,t,n,a)=>{const c=t.map(t=>n(e,t)),d=(await Promise.all(c)).reduce((e,t)=>(e.appendChild(t),e),document.createElement("div"));d.className="display-many-items","string"==typeof a&&(d.id=a);const o=document.createElement("div");if(o.id=a,"string"==typeof a){const e=document.createElement("h1");e.innerHTML=a,o.appendChild(e)}return o.appendChild(d),o.className="display-many",o},l=async e=>{try{history.pushState({},null,window.location.pathname)}catch(e){}const t=document.createElement("div");return t.className="home",t.appendChild(await s(e,e.modules,c,"Modules")),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("hr")),t.appendChild(await s(e,e.students,o,"Students")),t};window.classOverview=async(e,t)=>{e.container||(e.container=t instanceof Element?t:"string"==typeof t?document.getElementById(t):document.createElement("div")),e.body=document.createElement("div"),e.body.id="body",e.body.style="padding-top: 3%; padding-bottom: 3%;",e.container.appendChild((e=>{const t=document.createElement("div");t.className="header-footer",t.id="class-app";const n=document.createElement("h1");n.innerHTML=e.repoName,n.className="header-footer-title",t.appendChild(n),t.appendChild(document.createElement("hr"));const a=document.createElement("div");a.className="header-footer-header";const c=document.createElement("button");c.innerHTML="Class Home";const d=async()=>{e.currentModule=null,e.currentStudent=null,e.body.innerHTML="",e.body.appendChild(await l(e))};c.onclick=d,a.appendChild(c);const o=document.createElement("a");o.href="https://github.com/"+e.userName+"/"+e.repoName+"/projects",o.target="_blank";const s=document.createElement("button");s.innerHTML="Class HW Boards",o.appendChild(s),a.appendChild(o);const m=document.createElement("a");m.href="https://github.com/"+e.userName+"/"+e.repoName+"/issues",m.target="_blank";const i=document.createElement("button");i.innerHTML="Class Issues",m.appendChild(i),a.appendChild(m);const u=document.createElement("a");u.href="https://github.com/"+e.userName+"/"+e.repoName,u.target="_blank";const p=document.createElement("button");p.innerHTML="Class Repository",u.appendChild(p),a.appendChild(u);const h=document.createElement("button");h.innerHTML="class randomizer",h.onclick=async()=>{e.currentModule=null,e.currentStudent=null,e.body.innerHTML="",e.body.appendChild(await r(e))},a.appendChild(h),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br"));const C=document.createElement("a");C.href="https://home.hackyourfuture.be/students/homework-submission",C.target="_blank";const E=document.createElement("button");E.innerHTML="Homework Submission",C.appendChild(E),a.appendChild(C);const b=document.createElement("a");b.href="https://study.hackyourfuture.be",b.target="_blank";const f=document.createElement("button");f.innerHTML="Study Links",b.appendChild(f),a.appendChild(b);const g=document.createElement("a");g.href="https://home.hackyourfuture.be/curriculum",g.target="_blank";const w=document.createElement("button");w.innerHTML="Curriculum",g.appendChild(w),a.appendChild(g);const y=document.createElement("a");y.href="https://home.hackyourfuture.be/students",y.target="_blank";const N=document.createElement("button");N.innerHTML="Student Guidebook",y.appendChild(N),a.appendChild(y),t.appendChild(a),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("hr")),t.appendChild(e.body),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("hr"));const M=a.cloneNode(!0);return M.childNodes[0].onclick=d,t.appendChild(M),t})(e)),e.modules.forEach(e=>{e.populated=!!(e.projects||e.exercises||e.assessments),e.views={}}),e.students.forEach(e=>e.views={});const s=new URL(window.location.href).searchParams;if(s.get("randomizer"))return e.currentModule=null,e.currentStudent=null,e.body.innerHTML="",e.body.appendChild(await r(e)),e;const m=s.get("student");e.currentStudent=e.students.find(e=>e.name===m)||e.students.find(e=>e.userName===m);const i=s.get("module");return e.currentModule=e.modules.find(e=>e.name===i)||e.modules.find(e=>e.board===Number(i))||e.modules.find(e=>e.repo===i),e.currentStudent&&e.currentModule?(e.body.appendChild(await o(e,e.currentStudent)),e.body.appendChild(document.createElement("hr")),e.body.appendChild(await c(e,e.currentModule)),e.body.appendChild(await n(e.currentModule,e.currentStudent))):e.currentStudent?e.body.appendChild(await d(e,e.currentStudent)):e.currentModule?e.body.appendChild(await a(e,e.currentModule)):e.body.appendChild(await l(e)),e},window.onload=async()=>{const e=async e=>{console.log("... loading ",e);try{return(await fetch(e)).json()}catch(e){return console.log(e),e}},t=await e("./class-data/index.json");t instanceof Error||(t.students=await e("./class-data/students.json"),t.students instanceof Error||(t.coaches=await e("./class-data/coaches.json"),t.coaches instanceof Error||(t.modules=await e("./class-data/modules.json"),t.modules instanceof Error||(t.modules.forEach(e=>{e.coaches=[],t.coaches.forEach(t=>{-1!==t.modules.indexOf(e.name)&&e.coaches.push(t),-1!==t.modules.indexOf(e.number)&&e.coaches.push(t)})}),console.log("... loading student pictures"),window.state=await classOverview(t,document.getElementById("root")),console.log("initial state:",state)))))}}();
